"use strict";(self.webpackChunkblogie=self.webpackChunkblogie||[]).push([[955],{9955:(e,s,r)=>{r.r(s),r.d(s,{default:()=>c});var a=r(2791),i=(r(4111),r(1134)),t=r(7689),n=r(1087),l=r(6457),o=r(3174),d=r(184);const c=function(){const e=(0,t.s0)();(0,a.useEffect)((()=>{l.Z.getCurrentUser()&&l.Z.getCurrentUser().roles.includes("ROLE_USER")?e("/user/dashboard"):l.Z.getCurrentUser()&&l.Z.getCurrentUser().roles.includes("ROLE_ADMIN")&&e("/admin/transactions")}),[]);const{register:s,handleSubmit:r,formState:c}=(0,i.cI)(),[u,m]=(0,a.useState)(""),[g,x]=(0,a.useState)(!1);return(0,d.jsx)("div",{className:"container",children:(0,d.jsxs)("form",{className:"auth-form",onSubmit:r((async s=>{x(!0),await l.Z.login_req(s.email,s.password).then((()=>{m(""),setTimeout((()=>{l.Z.getCurrentUser().roles.includes("ROLE_USER")?e("/user/dashboard"):l.Z.getCurrentUser().roles.includes("ROLE_ADMIN")&&e("/admin/transactions")}),5e3),localStorage.setItem("message",JSON.stringify({status:"SUCCESS",text:"Login successfull!"}))}),(e=>{const s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();console.log(s),m("Bad credentials"===s?"Invalid email or password!":"Something went wrong: Try again later!")})),x(!1)})),children:[(0,d.jsx)(o.Z,{}),(0,d.jsx)("h2",{children:"Login"}),""!==u&&(0,d.jsx)("p",{children:u}),(0,d.jsxs)("div",{className:"input-box",children:[(0,d.jsx)("label",{children:"Email"}),(0,d.jsx)("br",{}),(0,d.jsx)("input",{type:"text",...s("email",{required:"Email is required!",pattern:{value:/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/g,message:"Invalid email address!"}})}),c.errors.email&&(0,d.jsx)("small",{children:c.errors.email.message})]}),(0,d.jsxs)("div",{className:"input-box",children:[(0,d.jsx)("label",{children:"Password"}),(0,d.jsx)("br",{}),(0,d.jsx)("input",{type:"password",...s("password",{required:"Password is required!"})}),c.errors.password&&(0,d.jsx)("small",{children:c.errors.password.message})]}),(0,d.jsxs)("div",{className:"msg",children:[" ",(0,d.jsx)(n.rU,{to:"/auth/forgetpassword/verifyEmail",className:"inline-link",children:"Forgot password?"})]}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"input-box",children:(0,d.jsx)("input",{type:"submit",value:g?"Logging in...":"Login",className:g?"button button-fill loading":"button button-fill"})}),(0,d.jsx)("br",{}),(0,d.jsxs)("div",{className:"msg",children:["New member? ",(0,d.jsx)(n.rU,{to:"/auth/register",className:"inline-link",children:"Register Here"})]})]})})}}}]);
//# sourceMappingURL=955.ad1c7a18.chunk.js.map