"use strict";(self.webpackChunkblogie=self.webpackChunkblogie||[]).push([[383],{2568:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(1134),n=a(2791),r=a(7689),i=a(184);const o=function(e){let{categories:t,onSubmit:a,isDeleting:o,isSaving:c,transaction:l,onDelete:d}=e;const{register:u,handleSubmit:m,watch:x,reset:p,formState:g}=(0,s.cI)(),j=(0,n.useRef)({});j.current=x("date");const b=(0,r.s0)();return(0,n.useEffect)((()=>{l&&l.transactionId&&p({category:String(l.categoryId),description:l.description,amount:l.amount,date:l.date.split("T")[0]})}),[p,l]),(0,i.jsxs)("form",{className:"auth-form t-form",onSubmit:m(a),children:[(0,i.jsxs)("div",{className:"input-box",children:[(0,i.jsx)("label",{children:"Transaction Category"}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{className:"radio",children:t.filter((e=>e.enabled)).map((e=>(0,i.jsxs)("span",{children:[(0,i.jsx)("input",{type:"radio",id:e.categoryName,value:e.categoryId,...u("category",{required:"category is required"})}),(0,i.jsx)("label",{for:e.categoryName,children:e.categoryName})]},e.categoryId)))}),g.errors.category&&(0,i.jsx)("small",{children:g.errors.category.message})]}),(0,i.jsxs)("div",{className:"input-box",children:[(0,i.jsx)("label",{children:"Transaction description"}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"text",...u("description",{maxLength:{value:50,message:"Description can have atmost 50 characters!"}})}),g.errors.description&&(0,i.jsx)("small",{children:g.errors.description.message})]}),(0,i.jsxs)("div",{className:"input-box",children:[(0,i.jsx)("label",{children:"Amount"}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"text",...u("amount",{required:"Amount is required!",pattern:{value:/^[0-9.]{1,}$/g,message:"Invalid amount!"}})}),g.errors.amount&&(0,i.jsx)("small",{children:g.errors.amount.message})]}),(0,i.jsxs)("div",{className:"input-box",children:[(0,i.jsx)("label",{children:"Date"}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"date",value:void 0===j.current?(new Date).toISOString().split("T")[0]:j.current,...u("date")}),g.errors.date&&(0,i.jsx)("small",{children:g.errors.date.message})]}),(0,i.jsxs)("div",{className:"t-btn input-box",children:[(0,i.jsx)("input",{type:"submit",value:c?"Saving...":"Save transaction",className:c?"button button-fill loading":"button button-fill"}),(0,i.jsx)("input",{type:"submit",className:"button outline",value:"Cancel",onClick:e=>(e=>{e.preventDefault(),b("/user/transactions")})(e)})]}),l?(0,i.jsx)("div",{className:"t-btn input-box",children:(0,i.jsx)("button",{className:o?"button delete loading":"button delete",onClick:e=>((e,t)=>{e.preventDefault(),d(t)})(e,l.transactionId),children:o?"Deleting...":"Delete transaction"})}):(0,i.jsx)(i.Fragment,{})]})}},7589:(e,t,a)=>{a(2791),a(184)},7383:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(2791),n=a(7689),r=a(6457),i=a(2901),o=a(2568),c=a(565),l=a(5975),d=(a(7589),a(2173)),u=a(1405),m=a(7550),x=a(1637),p=a(5218),g=a(184);const j=[{id:1,name:"Expense"},{id:2,name:"Income"}];const b=function(){const[e,t]=(0,u.Z)(),[a,b]=(0,s.useState)([]),[h,v]=(0,s.useState)(1),[y,f]=(0,s.useState)(!1),S=(0,n.s0)();return(0,s.useEffect)((()=>{b(e.filter((e=>e.transactionType.transactionTypeId===h)))}),[e,h]),(0,g.jsxs)(x.Z,{activeNavId:2,children:[(0,g.jsx)(l.Z,{title:"New Transaction"}),(0,g.jsx)(p.x7,{}),t&&(0,g.jsx)(d.Z,{}),!t&&0===e.length&&(0,g.jsx)(m.Z,{text:"No data found!"}),!t&&0!==e.length&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{transactionTypes:j,setTransactionType:v,activeTransactionType:h}),(0,g.jsx)(o.Z,{categories:a,onSubmit:async e=>{f(!0),await i.Z.add_transaction(r.Z.getCurrentUser().email,e.category,e.description,e.amount,e.date).then((e=>{"SUCCESS"===e.data.status&&S("/user/transactions",{state:{text:e.data.response}})}),(e=>{e.response?p.ZP.error(e.response.data.response):p.ZP.error("Failed to add transaction: Try again later!")})),f(!1)},isSaving:y})]})]})}}}]);
//# sourceMappingURL=383.368c2417.chunk.js.map