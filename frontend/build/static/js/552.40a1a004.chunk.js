"use strict";(self.webpackChunkblogie=self.webpackChunkblogie||[]).push([[552],{2568:(e,t,a)=>{a.d(t,{Z:()=>o});var s=a(1134),n=a(2791),r=a(7689),i=a(184);const o=function(e){let{categories:t,onSubmit:a,isDeleting:o,isSaving:c,transaction:l,onDelete:d}=e;const{register:u,handleSubmit:p,watch:m,reset:x,formState:g}=(0,s.cI)(),j=(0,n.useRef)({});j.current=m("date");const b=(0,r.s0)();return(0,n.useEffect)((()=>{l&&l.transactionId&&x({category:String(l.categoryId),description:l.description,amount:l.amount,date:l.date.split("T")[0]})}),[x,l]),(0,i.jsxs)("form",{className:"auth-form t-form",onSubmit:p(a),children:[(0,i.jsxs)("div",{className:"input-box",children:[(0,i.jsx)("label",{children:"Transaction Category"}),(0,i.jsx)("br",{}),(0,i.jsx)("div",{className:"radio",children:t.filter((e=>e.enabled)).map((e=>(0,i.jsxs)("span",{children:[(0,i.jsx)("input",{type:"radio",id:e.categoryName,value:e.categoryId,...u("category",{required:"category is required"})}),(0,i.jsx)("label",{for:e.categoryName,children:e.categoryName})]},e.categoryId)))}),g.errors.category&&(0,i.jsx)("small",{children:g.errors.category.message})]}),(0,i.jsxs)("div",{className:"input-box",children:[(0,i.jsx)("label",{children:"Transaction description"}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"text",...u("description",{maxLength:{value:50,message:"Description can have atmost 50 characters!"}})}),g.errors.description&&(0,i.jsx)("small",{children:g.errors.description.message})]}),(0,i.jsxs)("div",{className:"input-box",children:[(0,i.jsx)("label",{children:"Amount"}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"text",...u("amount",{required:"Amount is required!",pattern:{value:/^[0-9.]{1,}$/g,message:"Invalid amount!"}})}),g.errors.amount&&(0,i.jsx)("small",{children:g.errors.amount.message})]}),(0,i.jsxs)("div",{className:"input-box",children:[(0,i.jsx)("label",{children:"Date"}),(0,i.jsx)("br",{}),(0,i.jsx)("input",{type:"date",value:void 0===j.current?(new Date).toISOString().split("T")[0]:j.current,...u("date")}),g.errors.date&&(0,i.jsx)("small",{children:g.errors.date.message})]}),(0,i.jsxs)("div",{className:"t-btn input-box",children:[(0,i.jsx)("input",{type:"submit",value:c?"Saving...":"Save transaction",className:c?"button button-fill loading":"button button-fill"}),(0,i.jsx)("input",{type:"submit",className:"button outline",value:"Cancel",onClick:e=>(e=>{e.preventDefault(),b("/user/transactions")})(e)})]}),l?(0,i.jsx)("div",{className:"t-btn input-box",children:(0,i.jsx)("button",{className:o?"button delete loading":"button delete",onClick:e=>((e,t)=>{e.preventDefault(),d(t)})(e,l.transactionId),children:o?"Deleting...":"Delete transaction"})}):(0,i.jsx)(i.Fragment,{})]})}},8552:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(2791),n=a(7689),r=a(6457),i=a(2901),o=a(2568),c=a(565),l=a(5975),d=a(1405),u=a(2173),p=a(7550),m=a(1637),x=a(5218),g=a(184);const j=[{id:1,name:"Expense"},{id:2,name:"Income"}];const b=function(){const{transactionId:e}=(0,n.UO)(),[t,a]=(0,s.useState)({}),[b,h]=(0,d.Z)(),[y,f]=(0,s.useState)([]),[v,S]=(0,s.useState)(1),[Z,N]=(0,s.useState)(!1),[T,C]=(0,s.useState)(!1),I=(0,n.s0)();return(0,s.useEffect)((()=>{f(b.filter((e=>e.transactionType.transactionTypeId===v)))}),[b,v]),(0,s.useEffect)((()=>{!async function(){await i.Z.get_single_transaction(e).then((e=>{"SUCCESS"===e.data.status&&a(e.data.response)}),(e=>{e.response?x.ZP.error(e.response.data.response):x.ZP.error("Failed to fetch transaction information: Try again later!")}))}()}),[e]),(0,s.useEffect)((()=>{S(t.transactionType)}),[t]),(0,g.jsxs)(m.Z,{activeNavId:1,children:[(0,g.jsx)(l.Z,{title:"Edit Transaction"}),h&&(0,g.jsx)(u.Z,{}),!h&&0===b.length&&(0,g.jsx)(p.Z,{text:"No data found!"}),!h&&0!==b.length&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{transactionTypes:j,setTransactionType:S,activeTransactionType:v}),(0,g.jsx)(o.Z,{categories:y,onSubmit:async t=>{N(!0),await i.Z.update_transaction(e,r.Z.getCurrentUser().email,t.category,t.description,t.amount,t.date).then((e=>{"SUCCESS"!==e.data.status||I("/user/transactions",{state:{text:e.data.response}})}),(e=>{e.response?x.ZP.error(e.response.data.response):x.ZP.error("Failed to edit transaction information: Try again later!")})),N(!1)},isDeleting:T,isSaving:Z,transaction:t,onDelete:async e=>{C(!0),await i.Z.delete_transaction(e).then((e=>{"SUCCESS"===e.data.status&&I("/user/transactions",{state:{text:e.data.response}})}),(e=>{e.response?x.ZP.error(e.response.data.response):x.ZP.error("Failed to delete transaction: Try again later!")})),C(!1)}})]})]})}}}]);
//# sourceMappingURL=552.40a1a004.chunk.js.map