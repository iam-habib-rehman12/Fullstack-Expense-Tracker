{"version":3,"file":"static/js/552.40a1a004.chunk.js","mappings":"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","sources":["components/userTransactions/transactionForm.js","pages/user/editTransaction.js"],"sourcesContent":["import { useForm } from 'react-hook-form';\r\nimport { useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction TransactionForm({ categories, onSubmit, isDeleting, isSaving, transaction, onDelete }) {\r\n    // form field controll\r\n    const { register, handleSubmit, watch, reset, formState } = useForm();\r\n    const date = useRef({});\r\n    date.current = watch('date');\r\n    const navigate = useNavigate()\r\n\r\n    useEffect(() => {\r\n        if (transaction && transaction.transactionId) {\r\n            reset({\r\n                category: String(transaction.categoryId),\r\n                description: transaction.description,\r\n                amount: transaction.amount,\r\n                date: transaction.date.split('T')[0]\r\n            })\r\n        }\r\n    }, [reset, transaction])\r\n\r\n    const deleteTransaction = (e, id) => {\r\n        e.preventDefault()\r\n        onDelete(id)\r\n    }\r\n\r\n    const cancelProcess = (e) => {\r\n        e.preventDefault()\r\n        navigate('/user/transactions')\r\n    }\r\n\r\n\r\n    return (\r\n        <form className=\"auth-form t-form\" onSubmit={handleSubmit(onSubmit)}>\r\n\r\n            <div className='input-box'>\r\n\r\n                {/* input category */}\r\n                <label>Transaction Category</label><br />\r\n                <div className='radio'>\r\n\r\n                    {\r\n                        categories.filter(cat => cat.enabled).map((cat) => {\r\n                            return (\r\n                                <span key={cat.categoryId}>\r\n                                    <input\r\n                                        type='radio'\r\n                                        id={cat.categoryName}\r\n                                        value={cat.categoryId}\r\n                                        {...register('category', {\r\n                                            required: \"category is required\"\r\n                                        })}\r\n                                    /><label for={cat.categoryName}>{cat.categoryName}</label>\r\n                                </span>\r\n                            )\r\n                        })\r\n                    }\r\n\r\n                </div>\r\n                {formState.errors.category && <small>{formState.errors.category.message}</small>}\r\n            </div>\r\n\r\n            {/* input description */}\r\n            <div className='input-box'>\r\n                <label>Transaction description</label><br />\r\n                <input\r\n                    type='text'\r\n                    {...register('description', {\r\n                        maxLength: {\r\n                            value: 50,\r\n                            message: \"Description can have atmost 50 characters!\"\r\n                        }\r\n                    })}\r\n                />\r\n                {formState.errors.description && <small>{formState.errors.description.message}</small>}\r\n            </div>\r\n\r\n            {/* input amount */}\r\n            <div className='input-box'>\r\n                <label>Amount</label><br />\r\n                <input\r\n                    type='text'\r\n                    {...register('amount', {\r\n                        required: \"Amount is required!\",\r\n                        pattern: { value: /^[0-9.]{1,}$/g, message: \"Invalid amount!\" }\r\n                    })}\r\n                />\r\n                {formState.errors.amount && <small>{formState.errors.amount.message}</small>}\r\n            </div>\r\n\r\n            {/* input date */}\r\n            <div className='input-box'>\r\n                <label>Date</label><br />\r\n                <input\r\n                    type='date'\r\n                    value={(date.current === undefined) ? new Date().toISOString().split('T')[0] : date.current}\r\n                    {...register('date')}\r\n                />\r\n                {formState.errors.date && <small>{formState.errors.date.message}</small>}\r\n            </div>\r\n\r\n            <div className='t-btn input-box'>\r\n                <input type='submit' value={isSaving ? \"Saving...\" : 'Save transaction'}\r\n                    className={isSaving ? \"button button-fill loading\" : \"button button-fill\"} />\r\n                <input type='submit' className='button outline' value='Cancel' onClick={(e) => cancelProcess(e)} />\r\n\r\n            </div>\r\n            {\r\n                transaction ?\r\n                    <div className='t-btn input-box'>\r\n                        <button\r\n                            className={isDeleting ? \"button delete loading\" : \"button delete\"}\r\n                            onClick={(e) => deleteTransaction(e, transaction.transactionId)} \r\n                        >\r\n                            {isDeleting ? \"Deleting...\" : 'Delete transaction'} \r\n                        </button>\r\n                    </div>\r\n                    : <></>\r\n            }\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default TransactionForm;","import { useEffect, useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport AuthService from '../../services/auth.service';\r\nimport UserService from '../../services/userService';\r\nimport TransactionForm from '../../components/userTransactions/transactionForm';\r\nimport TransactionTypeSelectWrapper from '../../components/userTransactions/transactionTypeSelectWrapper';\r\nimport Header from '../../components/utils/header';\r\nimport useCategories from '../../hooks/useCategories';\r\nimport Loading from '../../components/utils/loading';\r\nimport Info from '../../components/utils/Info';\r\nimport Container from '../../components/utils/Container';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst transactionTypes = [{ 'id': 1, 'name': 'Expense' }, { 'id': 2, 'name': 'Income' }]\r\n\r\nfunction EditTransaction() {\r\n\r\n    const { transactionId } = useParams();\r\n    const [transaction, setData] = useState({});\r\n    const [categories, isFetching] = useCategories();\r\n    const [filteredCategories, setFilteredCategories] = useState([]);\r\n    const [activeTransactionType, setTransactionType] = useState(1);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [isDeleting, setIsDeleting] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        setFilteredCategories(categories.filter(cat => cat.transactionType.transactionTypeId === activeTransactionType));\r\n    }, [categories, activeTransactionType])\r\n\r\n\r\n    // to be edited transaction fetch\r\n    async function getTransaction() {\r\n        await UserService.get_single_transaction(transactionId).then(\r\n            (response) => {\r\n                if (response.data.status === \"SUCCESS\") {\r\n                    setData(response.data.response)\r\n                }\r\n            },\r\n            (error) => {\r\n                error.response ?\r\n                    toast.error(error.response.data.response)\r\n                    :\r\n                    toast.error(\"Failed to fetch transaction information: Try again later!\")\r\n            }\r\n        )\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        getTransaction()\r\n    }, [transactionId])\r\n\r\n    useEffect(() => {\r\n        setTransactionType(transaction.transactionType)\r\n    }, [transaction])\r\n\r\n    // form submition controll\r\n    const onSubmit = async (data) => {\r\n        setIsSaving(true)\r\n        await UserService.update_transaction(\r\n            transactionId, AuthService.getCurrentUser().email, data.category, data.description, data.amount, data.date\r\n        ).then(\r\n            (response) => {\r\n                if (response.data.status === \"SUCCESS\") {\r\n                    navigate(\"/user/transactions\", { state: { text: response.data.response } })\r\n                    return\r\n                }\r\n            },\r\n            (error) => {\r\n                error.response ?\r\n                    toast.error(error.response.data.response)\r\n                    :\r\n                    toast.error(\"Failed to edit transaction information: Try again later!\")\r\n            }\r\n        );\r\n        setIsSaving(false);\r\n    }\r\n\r\n    const onDelete = async (id) => {\r\n        setIsDeleting(true)\r\n        await UserService.delete_transaction(id).then(\r\n            (response) => {\r\n                if (response.data.status === \"SUCCESS\") {\r\n                    navigate(\"/user/transactions\", { state: { text: response.data.response } })\r\n                }\r\n            },\r\n            (error) => {\r\n                error.response ?\r\n                    toast.error(error.response.data.response)\r\n                    :\r\n                    toast.error(\"Failed to delete transaction: Try again later!\")\r\n            }\r\n        )\r\n        setIsDeleting(false)\r\n    }\r\n\r\n    return (\r\n        <Container activeNavId={1}>\r\n            <Header title=\"Edit Transaction\" />\r\n            {(isFetching) && <Loading />}\r\n            {(!isFetching && categories.length === 0) && <Info text=\"No data found!\" />}\r\n            {\r\n                (!isFetching && categories.length !== 0) && (\r\n                    <>\r\n                        <TransactionTypeSelectWrapper\r\n                            transactionTypes={transactionTypes}\r\n                            setTransactionType={setTransactionType}\r\n                            activeTransactionType={activeTransactionType}\r\n                        />\r\n                        <TransactionForm\r\n                            categories={filteredCategories}\r\n                            onSubmit={onSubmit}\r\n                            isDeleting={isDeleting}\r\n                            isSaving={isSaving}\r\n                            transaction={transaction}\r\n                            onDelete={onDelete}\r\n                        />\r\n                    </>\r\n                )\r\n            }\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default EditTransaction;"],"names":["_ref","categories","onSubmit","isDeleting","isSaving","transaction","onDelete","register","handleSubmit","watch","reset","formState","useForm","date","useRef","current","navigate","useNavigate","useEffect","transactionId","category","String","categoryId","description","amount","split","_jsxs","className","children","_jsx","filter","cat","enabled","map","type","id","categoryName","value","required","for","errors","message","maxLength","pattern","undefined","Date","toISOString","onClick","e","preventDefault","cancelProcess","deleteTransaction","_Fragment","transactionTypes","useParams","setData","useState","isFetching","useCategories","filteredCategories","setFilteredCategories","activeTransactionType","setTransactionType","setIsSaving","setIsDeleting","transactionType","transactionTypeId","async","UserService","get_single_transaction","then","response","data","status","error","toast","getTransaction","Container","activeNavId","Header","title","Loading","length","Info","text","TransactionTypeSelectWrapper","TransactionForm","update_transaction","AuthService","getCurrentUser","email","state","delete_transaction"],"sourceRoot":""}